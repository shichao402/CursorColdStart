# 项目初始化计划

> **用途：** 这是一个固化的项目初始化流程，AI助手将按照此计划逐步引导完成项目起步。

## 📋 流程概述

1. **阅读项目计划文档** - 理解项目目标和技术需求
2. **技术选型确认** - 通过问答模板收集技术选型信息
3. **逐步实施** - 按照计划步骤创建代码、更新规则、应用规则
4. **验证完成** - 确保所有步骤完成，项目可以开始开发

## 🎯 初始化步骤

### 阶段1：项目理解和技术选型

#### 步骤1.1：阅读项目计划文档
- **目标：** 理解项目要做什么
- **输入：** `.cold-start/project-init/ProjectPlan.md` 文档
- **输出：** 项目理解摘要
- **AI操作：**
  1. 读取 `.cold-start/project-init/ProjectPlan.md` 文件
  2. 提取关键信息：
     - 项目名称和描述
     - 技术栈要求
     - 项目结构
     - 特殊需求
  3. 生成项目理解摘要

#### 步骤1.2：技术选型确认（问答模板）
- **目标：** 收集完整的技术选型信息
- **输入：** 项目计划文档 + 问答模板
- **输出：** 技术选型确认清单
- **AI操作：**
  1. 根据项目计划文档，生成技术选型问题
  2. 使用问答模板逐个询问用户
  3. 记录所有答案
  4. 生成技术选型确认清单

**问答模板：** 参考 `TECH_STACK_QUESTIONNAIRE.md`

### 阶段2：日志系统初始化

#### 步骤2.1：创建统一日志服务
- **目标：** 实现项目统一的日志服务
- **输入：** 技术选型信息
- **输出：** 日志服务代码文件
- **AI操作：**
  1. 根据技术选型确定日志服务实现方式
  2. 创建日志服务类（单例模式）
  3. 实现日志文件写入功能
  4. 实现日志轮转策略
  5. 添加错误日志支持（包含堆栈跟踪）

**参考模板：** `templates/logger_service_template.{language}`

#### 步骤2.2：创建日志收集脚本
- **目标：** 创建日志收集脚本
- **输入：** 技术选型信息（平台、日志路径等）
- **输出：** 日志收集脚本
- **AI操作：**
  1. 根据平台（Android、macOS、Windows等）创建对应脚本
  2. 配置日志文件路径
  3. 实现自动查找最新日志文件
  4. 实现日志内容显示

**参考模板：** `templates/collect_logs_template.sh`

#### 步骤2.3：更新日志规则模板
- **目标：** 根据项目特点更新日志规则模板
- **输入：** 技术选型信息 + 日志服务实现
- **输出：** 更新后的 `01-logging.mdc` 模板
- **AI操作：**
  1. 读取 `templates/rules/01-logging.mdc`
  2. 根据项目特点更新：
     - 日志服务类名
     - 日志文件路径
     - 日志收集脚本路径
     - 路径限定规则（如果有多个模块）
  3. 保存更新后的模板

#### 步骤2.4：应用日志规则
- **目标：** 将更新后的日志规则应用到项目
- **输入：** 更新后的 `01-logging.mdc` 模板
- **输出：** 项目中的 `.cursor/rules/01-logging.mdc`
- **AI操作：**
  1. 创建 `.cursor/rules/` 目录（如果不存在）
  2. 复制更新后的 `01-logging.mdc` 到 `.cursor/rules/`
  3. 验证文件格式正确

### 阶段3：脚本系统初始化

#### 步骤3.1：创建部署脚本
- **目标：** 创建项目部署脚本
- **输入：** 技术选型信息（构建工具、平台等）
- **输出：** 部署脚本文件
- **AI操作：**
  1. 根据构建工具（Flutter、Node.js、Python等）创建对应脚本
  2. 实现模块化脚本结构：
     - `kill_process.sh` - 终止进程
     - `build.sh` - 构建应用
     - `install.sh` - 安装应用（如果需要）
     - `start.sh` - 启动应用（如果需要）
     - `deploy.sh` - 完整部署流程
  3. 实现工具自动查找
  4. 实现环境检查

**参考模板：** `templates/deploy_scripts_template/`

#### 步骤3.2：更新脚本规则模板
- **目标：** 根据项目特点更新脚本规则模板
- **输入：** 技术选型信息 + 部署脚本实现
- **输出：** 更新后的 `02-scripts.mdc` 模板
- **AI操作：**
  1. 读取 `templates/rules/02-scripts.mdc`
  2. 根据项目特点更新：
     - 部署脚本路径
     - 构建工具命令
     - 平台特定说明
  3. 保存更新后的模板

#### 步骤3.3：应用脚本规则
- **目标：** 将更新后的脚本规则应用到项目
- **输入：** 更新后的 `02-scripts.mdc` 模板
- **输出：** 项目中的 `.cursor/rules/02-scripts.mdc`
- **AI操作：**
  1. 复制更新后的 `02-scripts.mdc` 到 `.cursor/rules/`
  2. 验证文件格式正确

### 阶段4：调试规则初始化

#### 步骤4.1：更新调试规则模板
- **目标：** 根据项目特点更新调试规则模板
- **输入：** 技术选型信息 + 已创建的脚本
- **输出：** 更新后的 `03-debugging.mdc` 模板
- **AI操作：**
  1. 读取 `templates/rules/03-debugging.mdc`
  2. 根据项目特点更新：
     - 调试流程中的脚本路径
     - 平台特定说明
  3. 保存更新后的模板

#### 步骤4.2：应用调试规则
- **目标：** 将更新后的调试规则应用到项目
- **输入：** 更新后的 `03-debugging.mdc` 模板
- **输出：** 项目中的 `.cursor/rules/03-debugging.mdc`
- **AI操作：**
  1. 复制更新后的 `03-debugging.mdc` 到 `.cursor/rules/`
  2. 验证文件格式正确

### 阶段5：核心规则初始化

#### 步骤5.1：更新核心规则模板
- **目标：** 根据项目特点更新核心规则模板
- **输入：** 项目计划文档 + 技术选型信息
- **输出：** 更新后的 `00-core.mdc` 模板
- **AI操作：**
  1. 读取 `templates/rules/00-core.mdc`
  2. 根据项目特点更新：
     - 项目名称
     - 规则优先级（如果需要调整）
     - 核心原则（如果需要调整）
  3. 保存更新后的模板

#### 步骤5.2：应用核心规则
- **目标：** 将更新后的核心规则应用到项目
- **输入：** 更新后的 `00-core.mdc` 模板
- **输出：** 项目中的 `.cursor/rules/00-core.mdc`
- **AI操作：**
  1. 复制更新后的 `00-core.mdc` 到 `.cursor/rules/`
  2. 验证文件格式正确

### 阶段6：开发规则初始化（可选）

#### 步骤6.1：更新开发规则模板
- **目标：** 根据项目特点更新开发规则模板
- **输入：** 技术选型信息
- **输出：** 更新后的 `04-development.mdc` 模板
- **AI操作：**
  1. 读取 `templates/rules/04-development.mdc`
  2. 根据项目特点更新：
     - 构建工具特定规则
     - 平台特定规则
  3. 保存更新后的模板

#### 步骤6.2：应用开发规则
- **目标：** 将更新后的开发规则应用到项目
- **输入：** 更新后的 `04-development.mdc` 模板
- **输出：** 项目中的 `.cursor/rules/04-development.mdc`
- **AI操作：**
  1. 复制更新后的 `04-development.mdc` 到 `.cursor/rules/`
  2. 验证文件格式正确

### 阶段7：验证和完成

#### 步骤7.1：验证规则文件
- **目标：** 确保所有规则文件格式正确且已应用
- **AI操作：**
  1. 检查 `.cursor/rules/` 目录下所有 `.mdc` 文件是否存在
  2. 验证每个文件都有 `alwaysApply: true` 前置元数据
  3. 验证路径限定语法正确（如果有）
  4. 验证所有占位符都已替换为实际值

#### 步骤7.2：验证代码文件
- **目标：** 确保所有代码文件已创建且可用
- **AI操作：**
  1. 验证日志服务文件存在且可编译/运行
  2. 验证日志收集脚本存在且有执行权限
  3. 验证部署脚本存在且有执行权限
  4. 测试日志服务基本功能

#### 步骤7.3：生成初始化报告
- **目标：** 生成项目初始化完成报告
- **输出：** `PROJECT_INIT_REPORT.md`
- **AI操作：**
  1. 汇总所有完成的工作
  2. 列出创建的文件
  3. 列出应用的规则
  4. 提供下一步建议

## 📝 执行说明

### AI助手执行流程

1. **开始初始化**
   ```
   用户：请按照 PROJECT_INIT_PLAN.md 开始项目初始化
   ```

2. **逐步执行**
   - AI按照计划步骤逐步执行
   - 每个步骤完成后，向用户报告进度
   - 需要用户输入时，使用问答模板

3. **完成验证**
   - 所有步骤完成后，生成初始化报告
   - 提供下一步开发建议

### 用户交互点

- **步骤1.2：** 技术选型问答（需要用户回答）
- **步骤7.3：** 初始化报告（用户确认）

### 错误处理

- 如果某个步骤失败，AI应该：
  1. 报告错误
  2. 提供修复建议
  3. 询问是否继续或重试

## 🎯 成功标准

项目初始化成功的标准：
- ✅ 所有规则文件已创建并应用
- ✅ 日志服务已实现并可用
- ✅ 日志收集脚本已创建
- ✅ 部署脚本已创建
- ✅ 所有规则文件格式正确
- ✅ 项目可以开始正常开发

